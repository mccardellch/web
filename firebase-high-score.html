<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>High Score App</title>
	<style>
	*{
		font-family: monospace;
		font-size:1.2em;
	}
	#scoreElement{
		font-size:3em;
		width:5em;
		height:2.5em;
		color:white;
		background-color:black;
		border:5px solid gray;
		text-align:center;
		padding-top: 1em;
	}
	</style>
    
    <script>
      
    </script>
</head>
<body>


<p id="scoreElement">0</p>
<p>Name --> <input type="text" value="MADMAX" id="nameField"></p>
<button id="clickMeButton">Click Me!</button>
<button id="saveScoreButton">Save High Score</button>
<button id="setScoreButton">Set High Score</button>

<!-- #1 - link to Firebase goes here  -->
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>

<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-database.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-analytics.js"></script>

<script type="module">

/* #2 - The rest of the Firebase setup code goes here */
// Your web app's Firebase configuration
  //removed API key for security
/*
  const firebaseConfig = {
      apiKey: "",
      authDomain: "",
      databaseURL: "",
      projectId: "",
      storageBucket: "",
      messagingSenderId: "",
      appId: "",
      measurementId: ""
  };
 */

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
    
console.log(firebase); // #3 - make sure firebase is loaded
	
let score = 0;
	
clickMeButton.onclick = _ => {
	score++;
	scoreElement.innerText = score;
};

saveScoreButton.onclick = _ => {
	firebase.database().ref('scores').push({
       userID: nameField.value,
       score: score
    });
};

//using the .set() method to add objects to firebase
    //and will provide our own key.
    //This means that if we re-use the key,
    //we can overwrite a previous JSON object
    //Here it means that there will be only one high score per username   
setScoreButton.onclick = _ => {
    let path = 'scores2/' + nameField.value;
	firebase.database().ref(path).set({
       userID: nameField.value,
       score: score
    });
};

</script>

</body>
</html>
